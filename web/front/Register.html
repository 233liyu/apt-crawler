<!DOCTYPE html>
<html lang="en">
<head>
        <title>登录表单</title>
        <!-- Meta-Tags -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <script  src="/apt/JS/jquery-3.2.1.min.js"></script>
        <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
        <!-- //Meta-Tags -->
        <!-- Style --> <link rel="stylesheet" href="../CSS/login.css" type="text/css" media="all">
</head>
<body>
    <h1>  </h1>

    <div class="container">
        <h2>注 册</h2>
            <input type="text" id="Username" Name="Username" placeholder="用户名(4-10位)">
            <input type="password" id="Password" Name="Password" placeholder="密码（6-12位）">
            <input type="text" id="Email" Name="Email" placeholder="邮箱">

        <p>请按提示填写信息</p>
        <a href="#" onclick="alert('不存在的，必须注册')" class="ForgetPsd">不想注册?</a>
        <a href="Login.html" class="Register">已有账号?</a>

        <div class="send-button">
                <input type="submit" id="RegisterInformation" value="免费注册">
        </div>
    <div class="clear"></div>
    </div>

    <script>
        $("#RegisterInformation").click(function(){
            var name=$("#Username").val();
            var password=$("#Password").val();
            var email=$("#Email").val();
            var information={
                "user" : name,
                "password" : password,
                "email":email
            };
            var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            var name_len=name.length;
            var psd_len=password.length;
            if(!(name_len>0)){
                $("p").text("用户名不能为空");
            }
            else if(name_len<4){
                $("p").text("用户名太短，请重新输入");
            }
            else if(name_len>10){
                $("p").text("用户名太长，请重新输入");
            }
            else if(!(psd_len>0)){
                $("p").text("密码不能为空");
            }
            else if(psd_len<6){
                $("p").text("密码太短，请重新输入");
            }
            else if(psd_len>12) {
                $("p").text("密码太长，请重新输入");
            }
            else if(!filter.test(email)) {
                $("p").text("邮箱格式错误");
            }
            else{
                $.ajax({
                    type: "post",
                    url: "user/register",
                    data: {
                        "information": JSON.stringify(information)
                    },
                    error: function (request) {
                        alert("提交失败");
                    },
                    success: function (data) {
                        console.log(data);
                        if(data.successcode==1)
                        {
                            window.location.href = 'http://www.baidu.com';
                        }

                    }
                })
            }
        })
    </script>

</body>
</html>